---
title: "Uppy 2.0.0: smaller, faster, more modular plugins, Preact X, stricter types, and much more"
date: 2021-08-30
author: 
  - aduh95
  - murderlon
  - arturi
  - renee
  - mifi
  - andrew
image: https://uppy.io/images/blog/2.0/uppy-2-0-cover.jpg
published: true
---

Uppy 2.0 is on average 25% smaller, thanks to dropping support for IE11 and a lot of refactorings. We‚Äôve upgraded many dependencies, most notably Preact 8 to Preact X, greatly improved TypeScript support and screenreader accessibility, paid technical debt, and added support for multiple messages in the Informer plugin.

![Uppy 2.0 cover banner](/images/blog/2.0/uppy-2-0-cover.jpg)

<!--more-->

For those unfamiliar with it, Uppy is a sleek, modular JavaScript file uploader that integrates seamlessly with any application. In some (very valid) cases a developer would settle for <code>&lt;input type="file"&gt;</code>. Uppy was made for the other cases, where the developer may want to let their users see image previews, edit metadata, pick large files from Dropbox without hitting their devices first (saving on battery and data plans), restore selected files when a tab was accidentally closed, or crop an image in-browser before sending.

* * *

We first first introduced Uppy [5 years ago](/blog/2016/07/uppy-begins/) (36 in [dog-years](https://www.akc.org/expert-advice/health/how-to-calculate-dog-years-to-human-years/)), and it‚Äôs been 2.5 years since we released [Uppy 1.0](/blog/2019/04/1.0/). Major versions come with breaking changes. So to reduce friction for our userbase we try avoid them. This often means adding workarounds and BC-compatibility hacks to accomodate existing installs. Every once in a while though, it is time to clean all that up, and take the opportunity that comes with breaking with the past, to make the project leaner, and pave the way for a brighter future.

**So today we launch Uppy 2.0 üéä**

With 2.0, we have made Uppy 25% smaller, up to 1000X faster, and more intuitive to work with. The details on these claims are further down in the post. 2.0 also marks for us another milestone. Since 0.1 we have had the tagline:

> The next open source file uploader for webbrowsers

Between 1.0 and 2.0, we‚Äôve seen adoption ramp up incredibly steeply and now with over [24,000 stargazers on GitHub](https://github.com/transloadit/uppy/stargazers) we can safely say, Uppy has become the #1 file uploader in the world üåç

![Uppy 2.0 UI with files](/images/blog/2.0/uppy-ui-with-files.jpg)

## Table of Contents

- [Highlights since 1.0](#Highlights-since-1-0)
- [Smaller bundles](#Smaller-bundles)
- [Faster](#Faster)
- [Preact X and upgraded dependencies](#Preact-X-and-upgraded-dependencies)
- [`Plugin` is replaced with `BasePlugin` and `UIPlugin`](#Plugin-is-replaced-with-BasePlugin-and-UIPlugin)
- [Strict TypeScript types by default](#Strict-TypeScript-types-by-default)
- [Batch pre-signing URL's for AWS S3 Multipart](#Batch-pre-signing-URL‚Äôs-for-AWS-S3-Multipart)
- [And more](#And-more)
- [What future remains for 1.0](#What-future-remains-for-1-0)
- [That's it](#That‚Äôs-it)

## Highlights since 1.0

A lot of things have happened since 1.0. In case you have missed some of our 1.x releases, here is a small overview. We have added:

- Official integrations for [Vue](/blog/2020/11/1.23/) ([3](/blog/2021/04/1.27/)), [Angular](/blog/2021/07/1.30/), and [Svelte](/blog/2020/12/1.24/)
- [Hooks](http://localhost:4000/blog/2020/12/1.24/) for the React integration
- Support for picking files from [Box](/blog/2020/11/1.23/), [Unsplash](/blog/2020/10/1.22/), [Facebook](/blog/2020/04/1.10/), [OneDrive](/blog/2020/04/1.10/) 
- [‚ÄúGhost‚Äù files](/blog/2021/05/1.29/), as part of a revamped Golden Retriever Plugin, which makes recovering lost files more intuitive
- Support for 25 more languages (to a [total of 37](/docs/locales/#List-of-locale-packs))
- [Dark mode](/blog/2020/04/1.13/)
- [Image Editor](/blog/2020/07/1.18-image-editor/)
- Four new core team members: [@ajkachnic](https://github.com/ajkachnic), [@mifi](https://github.com/mifi), [@aduh95](https://github.com/aduh95), and [@murderlon](https://github.com/murderlon).

## Smaller bundles

With 2.0, following Microsoft, we are dropping support for IE11. As a result, we are able to remove all built-in polyfills, and the new bundle size is 25% smaller! If you need your app to support older browsers (such as IE11), you may need to add the following polyfills to your bundle:

- [abortcontroller-polyfill](https://github.com/mo/abortcontroller-polyfill)
- [core-js](https://github.com/zloirock/core-js)
- [md-gum-polyfill](https://github.com/mozdevs/mediaDevices-getUserMedia-polyfill)
- [resize-observer-polyfill](https://github.com/que-etc/resize-observer-polyfill)
- [whatwg-fetch](https://github.com/github/fetch)

If you're using a bundler, you need import them before Uppy:

```js
import 'core-js'
import 'whatwg-fetch'
import 'abortcontroller-polyfill/dist/polyfill-patch-fetch'
// Order matters: AbortController needs fetch which needs Promise (provided by core-js).

import 'md-gum-polyfill'
import ResizeObserver from 'resize-observer-polyfill'

window.ResizeObserver ??= ResizeObserver

export { default } from '@uppy/core'
export * from '@uppy/core'
```

If you're using Uppy from a CDN, we now provide two bundles, one for up-to-date browsers that do not include polyfills and use modern syntax, and one for legacy browsers. When migrating, be mindful about which browsers you want to support:

```html
<!-- Modern browsers (recommended) -->
<script src="https://releases.transloadit.com/uppy/v2.0.1/uppy.min.js"></script>

<!-- Legacy browsers (IE11+) -->
<script nomodule src="https://releases.transloadit.com/uppy/v2.0.1/uppy.legacy.min.js"></script>
<script type="module">import "https://releases.transloadit.com/uppy/v2.0.1/uppy.min.js";</script>
```

Please note that while you may be able to get 2.0 to work in IE11 this way, we do not officially support it anymore.

## Faster

Uppy now loads faster due to the decreased bundle size, and compared to 1.0, adding many files (hundreds or thousands), used to take dozens of seconds, which has now been reduced to milliseconds. So for that use case, speed improvements of 1000X are not uncommon or exaggerated.

This was made possible by avoiding rerendering all the file components whenever something changes, using `memoize` and `virtual-list` (allows us to only render what is actually on-screen). In addition, multiple files are now added to state in one go via `uppy.addFiles(Array)` vs when `uppy.addFile(File)` + `uppy.setState` were being called in a loop.

Before optimizations:

![](/images/blog/2.0/uppy-performance-before.gif)

After:

![](/images/blog/2.0/uppy-performance-after.gif)

## Preact X and upgraded dependencies

We‚Äôve upgraded almost all of Uppy‚Äôs dependencies. This includes the migration to Preact X. All plugins that depend on Preact have been upgraded from `8.2.9` to the latest version `10.5.13`. If you‚Äôd like your custom plugin to continue working with Uppy 2.0, it also needs to be using latest Preact now.

Other notable upgrades include browserify to `v10`, typescript to `v4.3`, and autoprefixer to `v10`.

## `Plugin` is replaced with `BasePlugin` and `UIPlugin`

[`@uppy/core`][core] provided a `Plugin` class for creating plugins. This was used for any official plugin, but also for users who want to create their own plugin. But `Plugin` always came bundled with Preact, even if the plugin itself didn't add any UI elements.

As of Uppy 2.0.0, `Plugin` has been replaced with `BasePlugin` and `UIPlugin`. `BasePlugin` is the minimum you need to create a plugin and `UIPlugin` adds Preact for rendering user interfaces.

Want to start creating your own plugin? Checkout the [‚ÄúWriting plugins‚Äù](/docs/writing-plugins) guide.

## Strict TypeScript types by default

Uppy used to have loose types by default and strict types as opt-in. The default export was a function that returned the `Uppy` class, and the types came bundled with the default export (`Uppy.SomeType`).

```ts
import Uppy from '@uppy/core'
import Tus from '@uppy/tus'

const uppy = Uppy<Uppy.StrictTypes>()

uppy.use(Tus, {
  invalidOption: null, // this will make the compilation fail!
})
```

Uppy is now strictly typed by default and loose types have been removed. The default export is the `Uppy` class and not a function. This means you need to call `Uppy` with the `new` keyword when initializing it.

```ts
// ...

const uppy = new Uppy()

uppy.use(Tus, {
  invalidOption: null, // this will make the compilation fail!
})
```

Uppy types are now individual exports and should be imported separately.

<!-- eslint-disable @typescript-eslint/no-unused-vars -->
```ts
import type { PluginOptions, UIPlugin, PluginTarget } from '@uppy/core'
```

### Event types

[`@uppy/core`][core] provides an [`.on`](/docs/uppy/#uppy-on-39-event-39-action) method to listen to [events](/docs/uppy/#Events). The types for these were loose and allowed for invalid events to be passed, such as `uppy.on('upload-errrOOOoooOOOOOrrrr')`.

Events have received a big update thanks to [@Hawxy](https://github.com/Hawxy), making them more strict and accurate.

A breaking change was required to make this happen.

<!-- eslint-disable @typescript-eslint/no-unused-vars -->
```ts
// Before:

type Meta = { myCustomMetadata: string }

// Invalid event
uppy.on<Meta>('upload-errrOOOoooOOOOOrrrr', () => {
  // ...
})

// After:

// Normal event signature
uppy.on('complete', (result) => {
  const successResults = result.successful
})

// Custom signature
type Meta = { myCustomMetadata: string }

// Notice how the custom type has now become the second argument
uppy.on<'complete', Meta>('complete', (result) => {
  // The passed type is now merged into the `meta` types.
  const meta = result.successful[0].meta.myCustomMetadata
})
```

Using official Uppy plugins that add their own events are automatically added to the namespace. For instance, when using [`@uppy/dashboard`][dashboard]:

<!-- eslint-disable @typescript-eslint/no-unused-vars -->
```ts
uppy.on('dashboard:file-edit-state', (file) => {
  const fileName = file.name
})
```

## Batch pre-signing URL's for AWS S3 Multipart

The [`@uppy/aws-s3-multipart`][aws-s3-multipart] plugin can be used to upload files directly to an S3 bucket using S3‚Äôs Multipart upload strategy. With this strategy, files are chopped up in parts of 5MB+ each, so they can be uploaded concurrently. It is also very reliable: if a single part fails to upload, only that 5MB chunk has to be retried.

However, every part needed to make a trip to the server to generate a pre-signed URL. This means a 1GB file uploaded in 5mb chunks would require 200 trips to the server.

As of Uppy 2.0.0, we now pre-sign URLs in batches. That same 1GB file now only takes 50 trips to the server (if the limit was 4).

This is now the new default. Thanks to [@martin-brennan](https://github.com/martin-brennan) for making this contribution.

Care about reliable uploads? You could also consider [`@uppy/tus`][tus] with a self-hosted or Transloadit Tus server. Tus can resume uploads, support smaller chunks, and higher upload speeds.

## And more

- The `.run` method on the `Uppy` instance has been removed. This method was already obsolete and only logged a warning. As of this major version it no longer exists.

- [`@uppy/informer`][informer] now supports showing multiple notifications at the same time. The notifications themselves have also been improved.

- Improved screenreader accessibility for checkboxes and the remove file button for [`@uppy/dashboard`][dashboard].

- Sort files and folders alphabetically in the Google Drive provider.

- Polished our code base with improved eslint rules, private field methods, and other modern JavaScript features that help us write more intention revealing and safe code.

- To make Uppy more friendly towards new contributors, we have renamed our `master` branch to `main`.

## What future remains for 1.0

1.0 will continue to receive bug fixes for 3 more months (until 1 December 2021), security fixes for 1 more year (until 1 September 2022), but, no new features as of today. Exceptions are unlikely but _can_ be made, for example to accomodate those with commercial support contracts.

## That's it!

We hope you'll kick the tires on 2.0 soon and let us know how you like it on Reddit, HN, ProductHunt, or Twitter.

<!-- definitions -->

[core]: /docs/uppy/
[dashboard]: /docs/dashboard/
[informer]: /docs/informer/
[aws-s3-multipart]: /docs/aws-s3-multipart/
[tus]: /docs/tus/
